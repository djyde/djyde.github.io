<!DOCTYPE html><html data-saber-ssr><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="ssr" name="generator" content="Saber v0.11.2"><meta data-saber-head="ssr" property="title" content="现代的 React - Randy&#x27;s Blog"><meta data-saber-head="ssr" property="description" content="&lt;p&gt;我一直很想写一本关于 React 的小书，因为我看到很多刚入门前端或刚开始使用 React 的开发者，对 React 有一些误解。也许是因为 JSX, 让很多人误以为 React 是一种黑魔法 —— 竟然能在 JS 文件里写 HTML! 还有很多围绕 React 的问题，像「状态管理」，就让很多人焦头烂额了。也正是因为 JSX, 让很多人依然用模板的思维去写 React.&lt;/p&gt;
"><meta data-saber-head="ssr" property="og:description" content="&lt;p&gt;我一直很想写一本关于 React 的小书，因为我看到很多刚入门前端或刚开始使用 React 的开发者，对 React 有一些误解。也许是因为 JSX, 让很多人误以为 React 是一种黑魔法 —— 竟然能在 JS 文件里写 HTML! 还有很多围绕 React 的问题，像「状态管理」，就让很多人焦头烂额了。也正是因为 JSX, 让很多人依然用模板的思维去写 React.&lt;/p&gt;
"><meta data-saber-head="ssr" property="twitter:description" content="&lt;p&gt;我一直很想写一本关于 React 的小书，因为我看到很多刚入门前端或刚开始使用 React 的开发者，对 React 有一些误解。也许是因为 JSX, 让很多人误以为 React 是一种黑魔法 —— 竟然能在 JS 文件里写 HTML! 还有很多围绕 React 的问题，像「状态管理」，就让很多人焦头烂额了。也正是因为 JSX, 让很多人依然用模板的思维去写 React.&lt;/p&gt;
"><meta data-saber-head="ssr" property="og:title" content="现代的 React - Randy&#x27;s Blog"><meta data-saber-head="ssr" property="og:type" content="article"><meta data-saber-head="ssr" property="article:published_time" content="2019-03-08 10:20:47"><meta data-saber-head="ssr" property="twitter:title" content="现代的 React - Randy&#x27;s Blog"><meta data-saber-head="ssr" property="og:url" content="https://lutaonan.com/blog/modern-react"><meta data-saber-head="ssr" property="og:image" content="https://gbstatic.djyde.com/assets/Snapseed%203.jpg?x-oss-process=image/auto-orient,1/quality,q_80/bright,-10/resize,w_2560/contrast,-30/interlace,1"><meta data-saber-head="ssr" property="twitter:image" content="https://gbstatic.djyde.com/assets/Snapseed%203.jpg?x-oss-process=image/auto-orient,1/quality,q_80/bright,-10/resize,w_2560/contrast,-30/interlace,1"> <title>现代的 React - Randy&#x27;s Blog</title> <link data-saber-head="ssr" rel="stylesheet" href="//ppp.djyde.com/css?family=Noto+Serif+SC"><link rel="stylesheet" href="/_saber/css/styles.d51a47c0.chunk.css">  </head><body><div id="_saber" data-server-rendered="true"><div><div data-v-12b68786><nav class="bg-black flex text-gray-300 item-center font-serif" data-v-7513afea data-v-12b68786><div class="text font-bold mr-4 p-1 pl-4" data-v-7513afea><a href="/" class="router-link-active" data-v-7513afea>Randy's Blog</a></div> <div class="flex item-center" data-v-7513afea><a href="/" class="mr-4 hover:bg-gray-300 hover:text-gray-900 p-1 router-link-active" data-v-7513afea>寫作</a></div><div class="flex item-center" data-v-7513afea><a href="/readings" class="mr-4 hover:bg-gray-300 hover:text-gray-900 p-1" data-v-7513afea>我讀</a></div><div class="flex item-center" data-v-7513afea><a href="/music" class="mr-4 hover:bg-gray-300 hover:text-gray-900 p-1" data-v-7513afea>音樂</a></div><div class="flex item-center" data-v-7513afea><a href="/about" class="mr-4 hover:bg-gray-300 hover:text-gray-900 p-1" data-v-7513afea>關於我</a></div></nav> <!----> <div class="post container mx-auto lg:pl-48 lg:pr-48" data-v-12b68786><h1 class="pl-4 pr-4" data-v-12b68786>现代的 React</h1> <div class="text-sm text-gray-500 pl-4 pr-4" data-v-12b68786>March 08, 2019</div> <div class="content" data-v-12b68786><p data-v-12b68786>我一直很想写一本关于 React 的小书，因为我看到很多刚入门前端或刚开始使用 React 的开发者，对 React 有一些误解。也许是因为 JSX, 让很多人误以为 React 是一种黑魔法 —— 竟然能在 JS 文件里写 HTML! 还有很多围绕 React 的问题，像「状态管理」，就让很多人焦头烂额了。也正是因为 JSX, 让很多人依然用模板的思维去写 React.</p> <p data-v-12b68786>但实际上，如果你理解 React 解决问题的方式的本质，你会发现 React 没有那么难。我写这本小书的主要目的，就是想让还觉得 React 难用的开发者们知道，React 很简单。</p> <p data-v-12b68786>React 是一种构建 UI 的思想，关于 <a rel="noopener noreferrer" target="_blank" href="https://github.com/reactjs/react-basic" data-v-12b68786>React 的思想</a>，我觉得已经是老生常谈了。在所有从本质层面讲解 React 的文章或书里，总不免提到这样的公式：</p> <div class="saber-highlight" data-lang="" data-v-12b68786><pre class="saber-highlight-code language-text" data-v-12b68786><code class="language-text" data-v-12b68786>UI = f(state)</code></pre></div><p data-v-12b68786>意思就是，UI 是基于状态的一个函数返回值。这也是 Sebastian (React 设计者) 设想的理想状态。直到当我们真正拿 React 来写 UI 的时候，却发现我们很难遵循这个公式——组件的内部状态需要依靠 Class. 而写 Class 是导致 React 使用者困惑的重要原因。</p> <p data-v-12b68786>用 Class 实现内部状态同时也带来了另一个问题——我们怎么复用这些逻辑？常见的做法就是使用 <a rel="noopener noreferrer" target="_blank" href="https://medium.com/merrickchristensen/function-as-child-components-5f3920a9ace9" data-v-12b68786>Function as Child Component</a>.</p> <p data-v-12b68786>先不说 Function as Child Component 容不容易被初学者理解, 光是它带来的嵌套问题，就已经足够我们烦恼了——可以想像我们只能用 callback 写 JavaScript 的时代。</p> <div class="saber-highlight" data-lang="js" data-v-12b68786><pre class="saber-highlight-code language-js" data-v-12b68786><code class="language-js" data-v-12b68786><span class="token keyword" data-v-12b68786>const</span> <span class="token function-variable function" data-v-12b68786>MyForm</span> <span class="token operator" data-v-12b68786>=</span> <span class="token punctuation" data-v-12b68786>(</span><span class="token punctuation" data-v-12b68786>)</span> <span class="token operator" data-v-12b68786>=&gt;</span> <span class="token punctuation" data-v-12b68786>(</span>
  <span class="token operator" data-v-12b68786>&lt;</span>DataFetcher<span class="token operator" data-v-12b68786>&gt;</span>
    <span class="token punctuation" data-v-12b68786>{</span><span class="token parameter" data-v-12b68786>data</span> <span class="token operator" data-v-12b68786>=&gt;</span> <span class="token punctuation" data-v-12b68786>(</span>
      <span class="token operator" data-v-12b68786>&lt;</span>Actions<span class="token operator" data-v-12b68786>&gt;</span>
        <span class="token punctuation" data-v-12b68786>{</span><span class="token parameter" data-v-12b68786>actions</span> <span class="token operator" data-v-12b68786>=&gt;</span> <span class="token punctuation" data-v-12b68786>(</span>
          <span class="token operator" data-v-12b68786>&lt;</span>Translations<span class="token operator" data-v-12b68786>&gt;</span>
            <span class="token punctuation" data-v-12b68786>{</span><span class="token parameter" data-v-12b68786>translations</span> <span class="token operator" data-v-12b68786>=&gt;</span> <span class="token punctuation" data-v-12b68786>(</span>
              <span class="token operator" data-v-12b68786>&lt;</span>Styles<span class="token operator" data-v-12b68786>&gt;</span>
                <span class="token punctuation" data-v-12b68786>{</span><span class="token parameter" data-v-12b68786>styles</span> <span class="token operator" data-v-12b68786>=&gt;</span> <span class="token punctuation" data-v-12b68786>(</span>
                  <span class="token operator" data-v-12b68786>&lt;</span>form styles<span class="token operator" data-v-12b68786>=</span><span class="token punctuation" data-v-12b68786>{</span>styles<span class="token punctuation" data-v-12b68786>}</span><span class="token operator" data-v-12b68786>&gt;</span>
                    <span class="token operator" data-v-12b68786>&lt;</span>input type<span class="token operator" data-v-12b68786>=</span><span class="token string" data-v-12b68786>&quot;text&quot;</span> value<span class="token operator" data-v-12b68786>=</span><span class="token punctuation" data-v-12b68786>{</span>data<span class="token punctuation" data-v-12b68786>.</span>value<span class="token punctuation" data-v-12b68786>}</span> <span class="token operator" data-v-12b68786>/</span><span class="token operator" data-v-12b68786>&gt;</span>
                    <span class="token operator" data-v-12b68786>&lt;</span>button onClick<span class="token operator" data-v-12b68786>=</span><span class="token punctuation" data-v-12b68786>{</span>actions<span class="token punctuation" data-v-12b68786>.</span>submit<span class="token punctuation" data-v-12b68786>}</span><span class="token operator" data-v-12b68786>&gt;</span>
                      <span class="token punctuation" data-v-12b68786>{</span>translations<span class="token punctuation" data-v-12b68786>.</span>submitText<span class="token punctuation" data-v-12b68786>}</span>
                    <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>button<span class="token operator" data-v-12b68786>&gt;</span>
                  <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>form<span class="token operator" data-v-12b68786>&gt;</span>
                <span class="token punctuation" data-v-12b68786>)</span><span class="token punctuation" data-v-12b68786>}</span>
              <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>Styles<span class="token operator" data-v-12b68786>&gt;</span>
            <span class="token punctuation" data-v-12b68786>)</span><span class="token punctuation" data-v-12b68786>}</span>
          <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>Translations<span class="token operator" data-v-12b68786>&gt;</span>
        <span class="token punctuation" data-v-12b68786>)</span><span class="token punctuation" data-v-12b68786>}</span>
      <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>Actions<span class="token operator" data-v-12b68786>&gt;</span>
    <span class="token punctuation" data-v-12b68786>)</span><span class="token punctuation" data-v-12b68786>}</span>
  <span class="token operator" data-v-12b68786>&lt;</span><span class="token operator" data-v-12b68786>/</span>DataFetcher<span class="token operator" data-v-12b68786>&gt;</span>
<span class="token punctuation" data-v-12b68786>)</span></code></pre></div><p data-v-12b68786>还有，我们应该怎么解决组件之间的状态共享问题？Redux? MobX? 还是其它状态管理工具？</p> <p data-v-12b68786>React 应该是简单直接的，但越来越多人「谈 React 色变」，正是由于以上的（或者以上没有提到的）问题，认为 React 复杂，难学。很多关于 React 的文章和书都花了不少篇幅来介绍这些解决问题的「设计模式」。</p> <p data-v-12b68786>但随着 React 的不断迭代，有了 Context API, 有了 Hooks API, 一切都变得简单了。我们可以抛开种种「模式」，真正用「函数式」的思维去构建 UI. 这也是标题想表达的意思 —— 我们应该使用「现代」的 React, 去避免不必要的学习成本。</p> <p data-v-12b68786>和著名的《设计模式》一样，很多「设计模式」是为了弥补面向对象的缺陷而出现的。React 通过自身 API 的完善，使我们能少写更多不必要的代码，少学习很多不必要的「模式」。</p> <p data-v-12b68786>我的目的不是在教你怎么用各种 React 相关的库，而是想让读者知道，我们在解决什么样的问题？我们解决问题的方法是什么？别人的库是怎么解决的？</p> <p data-v-12b68786>这个专栏会陆续发布循序渐进的文章。如果你完全没有接触过 React, 那么读完这个专栏后，你就完全能驾驭了 React 了，而且是用优雅的方式去驾驭他。你会发现，<strong data-v-12b68786>写 React 就是写函数那么简单，只不过这个函数的返回值是 Virtual DOM 罢了</strong>。</p> <p data-v-12b68786>初学者们，请不必因为不懂所谓的「模式」而感到惭愧，尽情享受技术发展带来的红利吧。</p> <hr data-v-12b68786> <p data-v-12b68786>这是我在小专栏付费连载的<a rel="noopener noreferrer" target="_blank" href="https://xiaozhuanlan.com/modern-react" data-v-12b68786>《Modern React》</a>的前言，目前正在限时打折，有兴趣的朋友可以订阅。</p> <p data-v-12b68786>之所以选择连载的方式，是因为我想要通过读者的反馈去决定我接下来连载的内容。欢迎读者们积极地来信反馈。</p></div></div> <div class="post text-center text-sm" data-v-12b68786><hr class="mt-12 mb-12" data-v-12b68786> <p data-v-12b68786>讨论请发邮件到 randypriv@gmail.com</p> <p data-v-12b68786>未经授权，禁止转载</p> <p data-v-12b68786>通过支付宝 djyde520@gmail.com 或赞赏码赞助此文</p> <p data-v-12b68786>
      或通过订阅我的
      <a href="/blog/my-zsxq/" data-v-12b68786 data-v-12b68786>知识星球</a>支持本博客
    </p> <br data-v-12b68786> <p data-v-12b68786><img src="https://gbstatic.djyde.com/assets/006tKfTcgy1fkuufy2cadj30w00w0tb2.jpg" class="w-auto sm:w-64 mx-auto" data-v-12b68786></p></div></div> <div class="font-serif text-sm text-center p-12 sm:p-32 text-gray-500 font-bold"><div>
      2014-2019
      <a href="/" class="router-link-active">Randy's Blog</a></div> <div class="mt-2">
      可通過 <a href="/rss.xml" class="border-b-4">RSS</a> 或 <a rel="noopener noreferrer" target="_blank" href="https://tinyletter.com/randysblog" class="border-b-4">Email</a> 訂閱本博客
    </div></div></div></div><script src="/_saber/js/styles.d51a47c0.js" defer></script><script src="/_saber/js/page--_posts-modern-react-md.4c0252b7.js" defer></script><script src="/_saber/js/client.abf0a765.js" defer></script></body></html>
